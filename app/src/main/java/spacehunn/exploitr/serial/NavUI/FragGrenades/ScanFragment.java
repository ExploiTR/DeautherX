package spacehunn.exploitr.serial.NavUI.FragGrenades;


import android.os.Bundle;
import android.support.annotation.NonNull;
import android.support.v4.app.Fragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Spinner;

import spacehunn.exploitr.serial.Helpers.CMD;
import spacehunn.exploitr.serial.Services.L;
import spacehunn.exploitr.serial.deautherx.MainActivity;
import spacehunn.exploitr.serial.deautherx.R;

@SuppressWarnings("ConstantConditions")
public class ScanFragment extends Fragment {

    private EditText time_, continue_time, scan_channel;
    private Spinner scan_mode;

    public ScanFragment() {
    }

    @Override
    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View scanView = inflater.inflate(R.layout.fragment_scan, container, false);
        Button start_scan = scanView.findViewById(R.id.start_scan);
        time_ = scanView.findViewById(R.id.time_enter);
        continue_time = scanView.findViewById(R.id.con_time_enter);
        scan_mode = scanView.findViewById(R.id.scanMode);
        scan_channel = scanView.findViewById(R.id.channel_enter);

        start_scan.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {
                L.p("CMD OUT :"+CMD.getScanCMD(scan_mode, time_, continue_time, scan_channel));
                ((MainActivity) getActivity()).usbService.write(
                        CMD.getScanCMD(scan_mode, time_, continue_time, scan_channel).getBytes()
                );
            }
        });

        return scanView;
    }

}
